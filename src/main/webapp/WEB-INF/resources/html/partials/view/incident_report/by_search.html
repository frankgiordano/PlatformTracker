<div data-ng-controller="IncidentReportController" data-ng-init="init()">
    <div style="padding-bottom: 1%; padding-top: 2%">
        <h2>Incident Report Generation</h2>
    </div>
    <div style="padding-bottom: 1%">
        <p>Click on a row to generate an incident report word document.</p>
    </div>
    <div class="form-group">
        <label class="control-label pull-left">Count Total:</label>
        <div class="col-sm-7 form-control-static">
            {{tableParams.total()}}
        </div>
    </div>
    <div style="clear:both;">&nbsp;</div>
    <div>
        <button ng-click="tableParams.sorting({})" class="btn btn-primary pull-right">Clear sorting</button>
        <button ng-click="tableParams.filter({})" class="btn btn-primary pull-right">Clear filter</button>
        <p><strong>Sorting:</strong> {{tableParams.sorting()|json}}
            <p><strong>Filter:</strong> {{tableParams.filter()|json}}
                <table ng-table="tableParams" show-filter="true"
                    class="table table-striped table-hover table-condensed">
                    <tbody>
                        <tr class="btn-link" ng-repeat="group in $data" ng-click="select(group)">
                            <td data-title="'Id'" sortable="'id'">{{group.id}}</td>
                            <td data-title="'Tag'" sortable="'tag'" filter="{ 'tag': 'text' }">{{group.tag}}</td>
                            <td data-title="'Status'" sortable="'status'">{{group.status | closed}}</td>
                            <td data-title="'Sev'" sortable="'severity'">{{group.severity}}</td>
                            <td data-title="'Description'" sortable="'description'" filter="{ 'description': 'text'}">
                                <div my-qtip qtip-content="{{group.description + ' ' + group.summary}}">
                                    {{group.description + " " + group.summary | addEllipsis}}
                                </div>
                            </td>
                            <td data-title="'Error'" sortable="'error'">{{group.errorName}}</td>
                            <td data-title="'Locus'" sortable="'locus'">{{group.locus}}</td>
                            <td data-title="'Start Time'" sortable="'startTime'">{{group.startTime | dateFormat}}</td>
                            <td data-title="'End Time'" sortable="'endTime'">{{group.endTime | dateFormat}}</td>
                            <td data-title="'Users Imped'" sortable="'usersImpacted'">
                                {{group.usersImpacted | percentage}}</td>
                            <!--    <td data-title="'Trans ID Imped'" sortable="'transactionIdsImpacted'" >{{group.transactionIdsImpacted}}</td> -->
                            <td data-title="'Calls'" sortable="'callsReceived'">{{group.callsReceived}}</td>
                            <td data-title="'AlertedBy'" sortable="'alertedBy'">{{group.alertedBy}}</td>
                            <!--    <td data-title="'iReport'" sortable="'incidentReport'" >{{group.incidentReport}}</td> -->
                        </tr>
                    </tbody>
                </table>
    </div>
</div>